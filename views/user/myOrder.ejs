<div class="min-h-screen flex">

  <!-- Sidebar -->
  <div class="hidden sm:block">
    <%- include('../partials/user/profileSidebar') %>
  </div>

  <!-- Content Area -->
  <main class="flex-1 sm:ml-64 p-2">
    <div class="max-w-5xl mx-auto bg-white rounded-xl shadow-md p-6">

        <h1 class="text-2xl font-bold mb-6 text-gray-800 border-b border-gray-200 pb-3">My Orders</h1>

      <% if (orders.length===0) { %>
        <div class="text-center py-12 text-gray-600">
          <p class="text-lg mb-3">You have no orders yet.</p>
          <a href="/shop" class="bg-yellow-500 text-white px-6 py-2 rounded-md hover:bg-yellow-600 transition">
            Shop Now
          </a>
        </div>
        <% } else { %>
          <div class="space-y-6">
            <% orders.forEach(order=> { %>
              <div class="border border-gray-200 rounded-lg p-5 shadow-sm hover:shadow-md transition">
                <!-- Order Info -->
                <div class="flex justify-between items-center mb-4">
                  <div class="text-gray-700 space-y-1">
                    <p><strong>Order ID:</strong>
                      <%= order.orderId %>
                    </p>
                    <p><strong>Date:</strong>
                      <%= order.createdAt.toLocaleDateString("en-IN") %>
                    </p>
                    <p><strong>Total:</strong> ₹<%= order.totalAmount %>
                    </p>
                  </div>
                  <a href="/order/<%= order._id %>"
                    class="bg-yellow-500 text-white px-4 py-1.5 rounded hover:bg-yellow-600 transition">
                    View Details
                  </a>
                </div>

                <!-- Order Items -->
                <div class="space-y-3">
                  <% order.items.forEach(item=> { %>
                    <div class="flex items-center gap-4 border border-gray-100 p-3 rounded-md bg-gray-50">
                      <% if (item.product && item.product.length> 0 && item.product[0].images &&
                        item.product[0].images.length > 0) { %>
                        <img src="/uploads/<%= item.product[0].images[0] %>" alt="<%= item.product[0].name %>"
                          class="w-16 h-16 object-cover rounded border" />
                        <% } else { %>
                          <img src="/uploads/default.jpg" alt="No image"
                            class="w-16 h-16 object-cover rounded border" />
                          <% } %>

                            <div class="flex flex-col">
                              <p class="font-semibold text-gray-800">
                                <%= item.product[0].name %>
                              </p>
                              <p class="text-sm text-gray-600">Quantity: <%= item.quantity %>
                              </p>
                              <p class="text-sm text-gray-600">Price: ₹<%= item.price %>
                              </p>
                              <p class="text-sm text-gray-600">Subtotal: ₹<%= item.price * item.quantity %>
                              </p>

                              <p class="text-sm font-medium mt-1">
                                Status:
                                <span class="px-2 py-0.5 rounded text-white
                          <%= item.status === 'Cancelled' ? 'bg-red-500' :
                              item.status === 'Delivered' ? 'bg-green-600' :
                              item.status === 'Pending' ? 'bg-yellow-500' :
                              item.status === 'Shipped' ? 'bg-blue-500' : 'bg-gray-500' %>">
                                  <%= item.status %>
                                </span>
                              </p>
                            </div>
                    </div>
                    <% }) %>
                </div>
              </div>
              <% }) %>
          </div>
          <% } %>

    </div>
  </main>
</div>