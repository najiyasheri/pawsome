<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - User Management</title>
    <link rel="stylesheet" href="/styles/layout.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/7.0.0/css/all.min.css"
        integrity="sha512-DxV+EoADOkOygM4IR9yXP8Sb2qwgidEmeqAEmDKIOfPRQZOWbXCzLC6vjbZyy0vPisbH2SyW27+ddLVCN+OMzQ=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
</head>
<body>
    <div class="dashboard">
        <%- include('../partials/admin/sidebar') %>
            <main class="content">
                <header class="topbar">
                    <h1>User Management</h1>
                    <div class="right">
                        <div><input type="text" placeholder="Search customer..."></div>
                    </div>
                </header>
                <button class="filter"><i class="fa-solid fa-filter"></i>Filter</button>
                <section class="table-container">
                    <table class="user-table">
                        <thead>
                            <tr>
                                <th>SNo</th>
                                <th>Name</th>
                                <th>Email</th>
                                <th>Status</th>
                                <th>Joined</th>
                                <th>Actions</th>
                            </tr>
                        </thead>
                       <tbody>
    <% if (typeof data !== 'undefined' && data.length > 0) { %>
        <% for (let i = 0; i < data.length; i++) { %>
            <tr>
                <td><%= data[i].SNo %></td>
                <td><%= data[i].Name %></td>
                <td><%= data[i].Email %></td>
                <td><%= data[i].Status %></td>
                <td><%= data[i].Joined %></td>
                <td>
                    <% if (data[i].Status === "Active") { %>
                        <a href="/admin/blockUser?id=<%= data[i]._id %>">
                            <button class="block"><i class="fa-solid fa-ban"></i> Block</button>
                        </a>
                    <% } else { %>
                        <a href="/admin/unblockUser?id=<%= data[i]._id %>">
                            <button class="unblock"><i class="fa-solid fa-unlock"></i> Unblock</button>
                        </a>
                    <% } %>
                </td>
            </tr>
        <% } %>
    <% } else { %>
        <tr>
            <td colspan="6" style="text-align:center;">No users found</td>
        </tr>
    <% } %>
</tbody>


                    </table>
                </section>
            </main>
    </div>
</body>
</html>