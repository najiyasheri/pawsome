<section class="p-6">
  <h1 class="text-2xl font-bold mb-6 text-gray-800 border-b border-gray-200 pb-3">
    User Details
  </h1>

  <div class="max-w-lg bg-white shadow-md rounded-lg p-6 space-y-4">
    <% if (typeof user !== 'undefined' && user) { %>
      <p><strong>Name:</strong> <%= user.name || 'N/A' %></p>
      <p><strong>Email:</strong> <%= user.email || 'N/A' %></p>
      <p><strong>Status:</strong> 
        <span class="<%= typeof user.isBlocked === 'boolean' && user.isBlocked ? 'text-red-500' : 'text-green-600' %>">
          <%= typeof user.isBlocked === 'boolean' && user.isBlocked ? 'Blocked' : 'Active' %>
        </span>
      </p>
      <p><strong>Joined:</strong> 
        <%= user.createdAt && !isNaN(new Date(user.createdAt)) 
            ? new Date(user.createdAt).toLocaleDateString("en-IN", { day: '2-digit', month: '2-digit', year: 'numeric' }) 
            : 'N/A' %>
      </p>
            <div class="mt-4">
              <h2 class="font-semibold text-lg mb-2">Default Address</h2>
              <% if (defaultAddress) { %>
                <p>
                  <%= defaultAddress.address || '' %>, <%= defaultAddress.pinCode || '' %>
                </p>
    
                <% } else { %>
                  <p class="text-gray-500">No default address available.</p>
                  <% } %>
            </div>
            
            <!-- Recent Orders -->
            <div class="mt-6">
              <h2 class="font-semibold text-lg mb-2">Recent Orders</h2>
              <% if (recentOrders && recentOrders.length>0) { %>
                <ul class="space-y-2">
                  <% recentOrders.forEach(order=> { %>
                    <li class="border border-gray-200 rounded p-3">
                      <p><strong>Order ID:</strong>
                        <%= order.orderId %>
                      </p>
                      <p><strong>Date:</strong>
                        <%= new Date(order.createdAt).toLocaleDateString("en-IN") %>
                      </p>
                      <p><strong>Total:</strong> ₹<%= order.totalAmount %>
                      </p>
                      <p><strong>Status:</strong>
                        <span class="<%= order.status === 'Cancelled' ? 'text-red-500' :
                                              order.status === 'Delivered' ? 'text-green-600' :
                                              order.status === 'Pending' ? 'text-yellow-500' :
                                              order.status === 'Shipped' ? 'text-blue-500' : 'text-gray-500' %>">
                          <%= order.status %>
                        </span>
                      </p>
                      <a href="/admin/order/<%= order._id %>" class="text-blue-600 hover:text-blue-800 mt-1 inline-block">
                        View Order
                      </a>
                    </li>
                    <% }) %>
                </ul>
                <% } else { %>
                  <p class="text-gray-500">No recent orders found.</p>
                  <% } %>
            </div>
            
            <% } else { %>
              <p class="text-red-500">User data not available.</p>
              <% } %>
                </div>


  <a href="/admin/users" class="inline-block mt-5 text-yellow-600 hover:text-yellow-800 font-medium">
    ← Back to Users
  </a>
</section>